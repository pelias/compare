(function(t){function e(e){for(var o,i,s=e[0],c=e[1],l=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push(["cd49","chunk-vendors"]),n()})({1145:function(t,e,n){"use strict";var o=n("1485"),r=n.n(o);r.a},1485:function(t,e,n){},6459:function(t,e,n){},"760a":function(t,e,n){"use strict";var o=n("94c1"),r=n.n(o);r.a},"8ccd":function(t,e,n){"use strict";var o=n("6459"),r=n.n(o);r.a},"94c1":function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-form",{staticClass:"w-100 px-4 pb-4",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t.endpointUsesText?n("b-form-group",{attrs:{label:"Query (text):","label-for":"input-text","label-cols-sm":"2"}},[n("b-form-input",{staticClass:"w-100",attrs:{id:"input-text",required:"",placeholder:"London, UK"},on:{change:t.onChange},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1):t._e(),t.endpointUsesIds?n("b-form-group",{attrs:{label:"Ids (comma separated):","label-for":"input-ids","label-cols-sm":"2"}},[n("b-form-input",{staticClass:"w-100",attrs:{id:"input-ids",required:"",placeholder:"openstreetmap:venue:way/5013364,whosonfirst:borough:421205771"},on:{change:t.onChange},model:{value:t.ids,callback:function(e){t.ids=e},expression:"ids"}})],1):t._e(),t.endpointUsesPoint?n("b-form-group",{attrs:{id:"input-group-2",label:t.pointLabel,"label-for":"input-point","label-cols-sm":"2"}},[n("div",{staticStyle:{display:"flex"}},[n("b-form-input",{attrs:{id:"input-point",placeholder:"40.74, -74",required:t.isPointRequired},on:{change:t.onPointChange},model:{value:t.pointStr,callback:function(e){t.pointStr=e},expression:"pointStr"}}),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-point",modifiers:{"modal-point":!0}}]},[n("font-awesome-icon",{attrs:{icon:["fa","map"]}})],1)],1)]):t._e(),n("b-form-group",{attrs:{id:"input-group-5",label:"Hosts","label-for":"input-hosts","label-cols-sm":"2"}},[n("vue-tags-input",{attrs:{id:"input-hosts",tags:t.hosts,placeholder:"Add Host"},on:{"tags-changed":t.tagsChanged},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}}),0===t.hosts.length?n("div",{staticClass:"alert alert-danger"},[t._v(" Please add at least one host ")]):t._e()],1),n("b-form-group",{attrs:{label:"Extra params","label-for":"input-extra-params","label-cols-sm":"2"}},[n("b-form-input",{attrs:{id:"input-extra-params",placeholder:"debug=true&foo=bar&baz=bat"},on:{change:t.onChange},model:{value:t.extraParams,callback:function(e){t.extraParams=e},expression:"extraParams"}})],1),n("div",{staticClass:"form-row form-group",attrs:{role:"group"}},[n("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Options")]),n("div",{staticClass:"bv-no-point-ring col flex"},[n("b-form-checkbox",{attrs:{id:"checkbox-debug"},on:{change:t.onDebugChange},model:{value:t.debug,callback:function(e){t.debug=e},expression:"debug"}},[t._v("Debug")])],1)]),n("div",{staticClass:"form-row form-group",attrs:{role:"group"}},[n("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Endpoint")]),n("div",{staticClass:"col-sm-10",staticStyle:{display:"flex"}},[n("b-form-radio",{attrs:{value:"/v1/search"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Geocode")]),n("b-form-radio",{attrs:{value:"/v1/autocomplete"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Autocomplete")]),n("b-form-radio",{attrs:{value:"/v1/reverse"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Reverse Geocode")]),n("b-form-radio",{attrs:{value:"/v1/search/structured"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Structured Geocode")]),n("b-form-radio",{attrs:{value:"/v1/place"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Place")])],1)]),n("b-form-group",{attrs:{label:"Search path","label-for":"input-search-path","label-cols-sm":"2"}},[n("b-form-input",{attrs:{id:"input-search-path",required:"",placeholder:"/v1/autocomplete?text=london"},model:{value:t.queryPath,callback:function(e){t.queryPath=e},expression:"queryPath"}})],1),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1),n("b-row",t._l(t.responses,(function(e){return n("ViewColumn",{key:e.url,attrs:{body:e.body,host:e.host,numHosts:t.hosts.length}})})),1),n("b-modal",{attrs:{id:"modal-point",title:t.pointLabel},on:{shown:t.pointModalShown}},[n("PointModal",{ref:"pointModal",attrs:{lat:t.pointLat,lng:t.pointLng},on:{"point-changed":t.pointChanged}})],1)],1)},a=[],i=(n("99af"),n("caad"),n("a15b"),n("d81d"),n("fb6a"),n("d3b7"),n("ac1f"),n("25f0"),n("8a79"),n("2532"),n("3ca3"),n("1276"),n("498a"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),s=n("d4ec"),c=n("bee2"),l=n("99de"),u=n("7e84"),p=n("262e"),d=n("9ab4"),h=n("60a3"),f=n("ad3d"),b=n("c7a0"),g=n("ecee"),m=n("c074"),v=n("e11e"),y=n("5f5b"),w=n("b1e0"),_=(n("f9e3"),n("2dd8"),n("2699")),x=n("a40a"),k=n("4e2b"),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-col",{attrs:{cols:12/t.numHosts}},[n("div",{staticClass:"messages"},[t._l(t.body.geocoding.errors,(function(e,o){return n("div",{key:o,staticClass:"alert alert-danger"},[t._v(" "+t._s(e)+" ")])})),t._l(t.body.geocoding.warnings,(function(e,o){return n("div",{key:o,staticClass:"alert alert-warning"},[t._v(" "+t._s(e)+" ")])}))],2),n("div",{staticClass:"response shadow"},[n("h4",{staticClass:"code-title code-title-silver rounded"},[n("span",{staticClass:"title"},[t._v(" "+t._s(t.host))])]),t.body.features&&t.body.features.length?n("div",{staticClass:"code rounded"},[n("ResultsSummary",{attrs:{features:t.body.features},on:{"feature-clicked":t.featureClicked}})],1):n("div",{staticClass:"code rounded"},[t._v(" No Results ")])]),n("div",{staticClass:"assertion shadow rounded",staticStyle:{"margin-top":"-10px"}},[n("l-map",{ref:"mymap",staticStyle:{height:"200px"},attrs:{center:t.center,zoom:13,options:{scrollWheelZoom:!1}}},[n("l-tile-layer",{attrs:{url:t.url}})],1)],1),t.body?n("div",{staticClass:"assertion shadow rounded",staticStyle:{"margin-top":"-10px"}},[n("div",{ref:"renderedJson",staticClass:"renderedJson"})]):t._e()])},O=[],C=(n("4160"),n("2ca0"),n("159b"),n("c975"),n("a9e3"),n("b64b"),n("53ca")),S=function(){var t=[];while(arguments.length)t.push(P(A(Array.prototype.shift.call(arguments)),U(Array.prototype.shift.call(arguments))));return t},P=function t(){for(var e=Array.prototype.shift.call(arguments),n=0;n<arguments.length;n++)arguments[n].constructor==Array?t.apply(this,[e].concat(arguments[n])):e.appendChild(arguments[n]);return e},L=function(t,e){return t.insertBefore(e,t.firstChild),t},M=function(t,e){var n=e||Object.keys(t);for(var o in n)if(Object.hasOwnProperty.call(t,n[o]))return!1;return!0},U=function(t){return document.createTextNode(t)},A=function(t){var e=document.createElement("span");return t&&(e.className=t),e},I=function(t,e,n){var o=document.createElement("a");return e&&(o.className=e),o.appendChild(U(t)),o.href="#",o.onclick=function(t){return console.log(t),t&&t.stopPropagation(),t&&t.preventDefault(),n(),!1},o};function E(t,e,n,o,r){var a=n?"":e,i=function(t,e,n,i,s){var c,l=A(i),u=function(){c||P(l.parentNode,c=L(s(),I(r.hide,"disclosure",(function(){c.style.display="none",l.style.display="inline"})))),c.style.display="inline",l.style.display="none"};P(l,I(r.show,"disclosure",u),S(i+" syntax",t),I(e,null,u),S(i+" syntax",n));var p=P(A(),U(a.slice(0,-1)),l);return o>0&&"string"!=i&&u(),p};return null===t?S(null,a,"keyword","null"):void 0===t?S(null,a,"keyword","undefined"):"string"==typeof t&&t.length>r.max_string_length?i('"',t.substr(0,r.max_string_length)+" ...",'"',"string",(function(){return P(A("string"),S(null,a,"string",JSON.stringify(t)))})):"object"!=Object(C["a"])(t)||[Number,String,Boolean,Date].indexOf(t.constructor)>=0?S(null,a,Object(C["a"])(t),JSON.stringify(t)):t.constructor==Array?0==t.length?S(null,a,"array syntax","[]"):i("[",r.collapse_msg(t.length),"]","array",(function(){for(var n=P(A("array"),S("array syntax","[",null,"\n")),a=0;a<t.length;a++)P(n,E(r.replacer.call(t,a,t[a]),e+"    ",!1,o-1,r),a!=t.length-1?S("syntax",","):[],U("\n"));return P(n,S(null,e,"array syntax","]")),n})):t instanceof HTMLElement?t:M(t,r.property_list)?S(null,a,"object syntax","{}"):i("{",r.collapse_msg(Object.keys(t).length),"}","object",(function(){var n=P(A("object"),S("object syntax","{",null,"\n"));for(var a in t)var i=a;var s=r.property_list||Object.keys(t);for(var c in r.sort_objects&&(s=s.sort()),s){a=s[c];a in t&&P(n,S(null,e+"    ","key",'"'+a+'"',"object syntax",": "),E(r.replacer.call(t,a,t[a]),e+"    ",!0,o-1,r),a!=i?S("syntax",","):[],U("\n"))}return P(n,S(null,e,"object syntax","}")),n}))}function q(t){var e=new Object(q.options);e.replacer="function"==typeof e.replacer?e.replacer:function(t,e){return e};var n=P(document.createElement("pre"),E(t,"",!1,e.show_to_level,e));return n.className="renderjson",n}q.set_icons=function(t,e){return q.options.show=t,q.options.hide=e,q},q.set_show_to_level=function(t){return q.options.show_to_level="string"==typeof t&&"all"===t.toLowerCase()?Number.MAX_VALUE:t,q},q.set_max_string_length=function(t){return q.options.max_string_length="string"==typeof t&&"none"===t.toLowerCase()?Number.MAX_VALUE:t,q},q.set_sort_objects=function(t){return q.options.sort_objects=t,q},q.set_replacer=function(t){return q.options.replacer=t,q},q.set_collapse_msg=function(t){return q.options.collapse_msg=t,q},q.set_property_list=function(t){return q.options.property_list=t,q},q.set_show_by_default=function(t){return q.options.show_to_level=t?Number.MAX_VALUE:0,q},q.options={},q.set_icons("⊕","⊖"),q.set_show_by_default(!1),q.set_sort_objects(!1),q.set_max_string_length("none"),q.set_replacer(void 0),q.set_property_list(void 0),q.set_collapse_msg((function(t){return t+" item"+(1==t?"":"s")}));var T=n("f2d1"),F={version:"2.0.1"};F.Icon=v["Icon"].extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(t){t=v["Util"].setOptions(this,t)},createIcon:function(){var t=document.createElement("div"),e=this.options;return e.icon&&(t.innerHTML=Object(g["b"])(e.icon,{styles:{color:e.iconColor}}).html[0]),e.bgPos&&(t.style.backgroundPosition=-e.bgPos.x+"px "+-e.bgPos.y+"px"),this._setIconStyles(t,"icon-"+e.markerColor),t},_createInner:function(){var t,e="",n="",o="",r=this.options;return t=r.icon.slice(0,r.prefix.length+1)===r.prefix+"-"?r.icon:r.prefix+"-"+r.icon,r.spin&&"string"===typeof r.spinClass&&(e=r.spinClass),r.iconColor&&("white"===r.iconColor||"black"===r.iconColor?n="icon-"+r.iconColor:o="style='color: "+r.iconColor+"' "),"<i "+o+"class='"+r.extraClasses+" "+r.prefix+" "+t+" "+e+" "+n+"'></i>"},_setIconStyles:function(t,e){var n,o=this.options,r=v["point"](o["shadow"===e?"shadowSize":"iconSize"]);n="shadow"===e?v["point"](o.shadowAnchor||o.iconAnchor):v["point"](o.iconAnchor),!n&&r&&(n=r.divideBy(2)),t.className="awesome-marker-"+e+" "+o.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},createShadow:function(){var t=document.createElement("div");return this._setIconStyles(t,"shadow"),t}});var N={icon:function(t){return new F.Icon(t)}},z=N,R=(n("db98"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"summary"},t._l(t.features||[],(function(e,o){return n("li",{key:e.properties.id,on:{click:function(n){return t.featureClicked(e)}}},[n("span",{staticClass:"num"},[t._v(t._s(o)),n("span",{staticClass:"hidden_brace"},[t._v(") ")])]),n("span",{staticClass:"icon"},[n("font-awesome-icon",{attrs:{icon:t.iconForLayer(e.properties.layer)}})],1),t._v(" "+t._s(e.properties.label)+" ")])})),0)}),B=[],J=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).call(this)),[T["a"],m["p"],m["f"],m["c"],m["k"],m["g"],m["q"],m["m"],m["e"],m["j"],m["d"],m["a"],m["o"],m["n"]].forEach((function(t){return g["c"].add(t)})),t}return Object(p["a"])(e,t),Object(c["a"])(e,[{key:"featureClicked",value:function(t){this.$emit("feature-clicked",t)}},{key:"iconForLayer",value:function(t){switch(t){case"locality":return m["p"];case"localadmin":return m["f"];case"neighbourhood":return m["c"];case"borough":return m["k"];case"county":return T["a"];case"macrocounty":return m["g"];case"region":return m["q"];case"macroregion":return m["m"];case"country":return m["e"];case"venue":return m["j"];case"address":return m["d"];case"mixed":return m["a"];case"street":return m["o"];default:return m["n"]}}}]),e}(h["c"]);Object(d["a"])([Object(h["b"])()],J.prototype,"features",void 0),J=Object(d["a"])([Object(h["a"])({components:{FontAwesomeIcon:f["a"]}})],J);var $=J,D=$,H=(n("760a"),n("2877")),V=Object(H["a"])(D,R,B,!1,null,"59ff5181",null),G=V.exports;function W(t){var e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children}function X(t,e){if("string"===typeof e&&e.startsWith("whosonfirst:")){var n=e.split(":"),o=n[n.length-1];return W('<a href="https://spelunker.whosonfirst.org/id/'.concat(o,'/">"').concat(e,'"</a>'))}if("string"===typeof e&&e.startsWith("openaddresses:")){var r=e.split(":");if(r.length>2){var a=r[2];return W('<span>"'.concat(r[0],":").concat(r[1],':<a href="https://github.com/openaddresses/openaddresses/blob/master/sources/').concat(a,'.json">').concat(r[2],"</a>:").concat(r.slice(3).join(":"),'"</span>'))}}return e}[T["b"],m["b"],m["l"],m["h"],m["i"],m["m"]].forEach((function(t){return g["c"].add(t)}));var K={default:z.icon({icon:m["b"],markerColor:"purple"}),geonames:z.icon({icon:m["l"],markerColor:"darkpurple"}),wof:z.icon({icon:T["b"],markerColor:"green"}),openstreetmap:z.icon({icon:m["i"],markerColor:"red"}),openaddresses:z.icon({icon:m["h"],markerColor:"orange"}),quattroshapes:z.icon({icon:m["m"],markerColor:"darkgreen"})},Q=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.renderedJson=null,t.summary="",t.center=Object(v["latLng"])(47.41322,-1.219482),t.url="//{s}.tiles.mapbox.com/v3/randyme.i0568680/{z}/{x}/{y}.png",t}return Object(p["a"])(e,t),Object(c["a"])(e,[{key:"centerFeatures",value:function(t){var e=v["geoJSON"](t),n=e.getBounds();try{n=n.pad(.5),this.getMap().fitBounds(n)}catch(o){console.error(o)}}},{key:"mounted",value:function(){q.set_replacer(X),q.set_show_to_level("all"),this.$refs.renderedJson.appendChild(q(this.body)),this.getMap().invalidateSize(),this.centerFeatures(this.body.features),this.addBoundingBoxes(),this.addMarkers()}},{key:"addMarkers",value:function(){var t,e,n=this.body,o=null;if(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.geocoding.query){var r=n.data.geocoding.query;r&&r["focus.point.lat"]&&r["focus.point.lon"]&&(o={lon:r["focus.point.lon"],lat:r["focus.point.lat"]})}var a=function(t,e){var n,o,r,a,i,s,c=K.default;if(null===(n=t.properties)||void 0===n?void 0:n.icon)c=z.icon({icon:t.properties.icon,markerColor:t.properties["marker-color"]||"red"});else switch(null===(o=t.properties)||void 0===o?void 0:o.source){case"openstreetmap":case"osm":c=K.openstreetmap;break;case"whosonfirst":case"wof":c=K.wof;break;case"geonames":case"gn":c=K.geonames;break;case"quattroshapes":case"qs":c=K.quattroshapes;break;case"openaddresses":case"oa":c=K.openaddresses;break;default:c=K.default;break}return v["marker"](e,{title:"".concat(null===(r=t.properties)||void 0===r?void 0:r.gid," - ").concat(null===(a=t.properties)||void 0===a?void 0:a.label),icon:c}).bindPopup('<p><strong style="font-size:14px">'.concat(null===(i=t.properties)||void 0===i?void 0:i.label,"</strong><br />").concat(null===(s=t.properties)||void 0===s?void 0:s.gid,"</p>"))},i=function(t){return t.properties};(null===(e=n.data)||void 0===e?void 0:e.features)&&o&&n.data.features.push({type:"Feature",properties:{"marker-color":"blue",icon:"crosshairs",gid:"lat: ".concat(o.lat,", lon: ").concat(o.lon),label:"focus.point"},geometry:{type:"Point",coordinates:[o.lon,o.lat]}}),v["geoJSON"](n,{pointToLayer:a,style:i}).addTo(this.getMap())}},{key:"addBoundingBoxes",value:function(){var t={stroke:!0,color:"blue",opacity:.5,dashArray:"5, 5",fillColor:"blue",fillOpacity:0,weight:2},e=new v["GeoJSON"];(this.body.features||[]).forEach((function(n){if(null===n||void 0===n?void 0:n.bbox){var o=[[n.bbox[1],n.bbox[0]],[n.bbox[3],n.bbox[2]]],r=new v["Rectangle"](o,t);r.addTo(e)}})),this.getMap().addLayer(e)}},{key:"featureClicked",value:function(t){var e=v["geoJSON"](t),n=e.getBounds();this.getMap().setView(n.getCenter(),6)}},{key:"getMap",value:function(){return this.$refs.mymap.mapObject}}]),e}(h["c"]);Object(d["a"])([Object(h["b"])()],Q.prototype,"body",void 0),Object(d["a"])([Object(h["b"])()],Q.prototype,"numHosts",void 0),Object(d["a"])([Object(h["b"])()],Q.prototype,"host",void 0),Q=Object(d["a"])([Object(h["a"])({components:{FontAwesomeIcon:f["a"],ResultsSummary:G}})],Q);var Z=Q,Y=Z,tt=(n("8ccd"),Object(H["a"])(Y,j,O,!1,null,null,null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("l-map",{ref:"mymap",staticStyle:{height:"50vh",width:"100%"},attrs:{zoom:t.zoom,center:t.pointLatLng||t.defaultCenter},on:{click:t.addMarker}},[n("l-tile-layer",{attrs:{url:t.url}}),t.pointLatLng?n("l-marker",{attrs:{"lat-lng":t.pointLatLng}}):t._e()],1)],1)},ot=[],rt=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.zoom=5,t.defaultCenter=Object(v["latLng"])(47.41322,-1.219482),t.url="//{s}.tiles.mapbox.com/v3/randyme.i0568680/{z}/{x}/{y}.png",t.pointLatLng=null,t}return Object(p["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){this.lat&&this.lng&&(this.pointLatLng=Object(v["latLng"])(this.lat,this.lng))}},{key:"addMarker",value:function(t){this.$emit("point-changed",t.latlng),this.pointLatLng=t.latlng}},{key:"getMap",value:function(){return this.$refs.mymap.mapObject}},{key:"invalidateSize",value:function(){var t=this;setTimeout((function(){t.getMap().invalidateSize()}),100)}}]),e}(h["c"]);Object(d["a"])([Object(h["b"])()],rt.prototype,"lat",void 0),Object(d["a"])([Object(h["b"])()],rt.prototype,"lng",void 0),rt=Object(d["a"])([Object(h["a"])({})],rt);var at=rt,it=at,st=Object(H["a"])(it,nt,ot,!1,null,null,null),ct=st.exports;n("6cc5"),n("db43");g["c"].add(m["i"]),h["c"].config.productionTip=!1,h["c"].use(y["a"]),h["c"].use(w["a"]),h["c"].component("l-map",_["a"]),h["c"].component("l-tile-layer",x["a"]),h["c"].component("l-marker",k["a"]),delete v["Icon"].Default.prototype._getIconUrl,v["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var lt=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.ids="",t.text="",t.point=null,t.pointStr="",t.host="",t.hosts=[],t.autocomplete=!1,t.debug=!0,t.queryPath="",t.extraParams="",t.responses=[],t.endpoint="/v1/search",t.getKey=function(t){for(var e=t.split("."),n=0;n<e.length-1;n+=1){var o=e.slice(n).join("."),r=window.localStorage.getItem("api_key:".concat(o));if("string"===typeof r&&r.length)return window.console.info("loaded key for domain '".concat(t,"' from localStorage: 'api_key:").concat(o,"'")),r}return"ge-5673e2c135b93a30"},t}return Object(p["a"])(e,t),Object(c["a"])(e,[{key:"pointModalShown",value:function(){this.$refs.pointModal.invalidateSize()}},{key:"tagsChanged",value:function(t){this.hosts=t,window.localStorage.setItem("endpoints",this.hosts.map((function(t){return t.text})).join(",")),this.onChange()}},{key:"created",value:function(){var t=this,e=window.localStorage.getItem("endpoints");window.console.info("loaded from localStorage:",(e||"").split(",").join(", ")),"string"===typeof e?""!==e&&(this.hosts=Object(b["createTags"])(e.split(","))):window.localStorage.setItem("endpoints",""),0===this.hosts.length&&(this.isBuiltForApi?this.hosts=Object(b["createTags"])(["".concat(window.location.protocol,"//").concat(window.location.host)]):this.hosts=Object(b["createTags"])(["https://api.geocode.earth","https://api.dev.geocode.earth"]));var n=window.location.hash.substr(1);if(this.isBuiltForSpa&&window.location.pathname.length>1&&(n="/v1/".concat(window.location.href.split("/v1/")[1])),n.includes("%3F")&&(n=decodeURIComponent(n)),n.length>0){var o=n.split("?");this.endpoint=o[0];var r=new URLSearchParams(o[1]);this.debug="1"===r.get("debug"),r.delete("debug"),this.text=r.get("text"),r.delete("text"),this.ids=r.get("ids"),r.delete("ids");var a=function(e){var n=e?"".concat(e,"."):"",o=r.get("".concat(n,"point.lat")),a=r.get("".concat(n,"point.lon"));if(!o||!a)return null;r.delete("".concat(n,"point.lat")),r.delete("".concat(n,"point.lon"));var i=new v["LatLng"](parseFloat(o.trim()),parseFloat(a.trim()));return t.pointStr="".concat(i.lat,",").concat(i.lng),i};this.point=a()||a("focus"),this.extraParams=r.toString(),(this.text&&this.endpointUsesText||this.point&&this.isPointRequired||this.ids&&this.endpointUsesIds)&&(this.onChange(),this.onSubmit())}}},{key:"getParams",value:function(){var t=new URLSearchParams("?".concat(this.extraParams));return this.point&&this.endpointUsesPoint&&(this.endpointUsesFocus?(t.set("focus.point.lat",this.point.lat.toString()),t.set("focus.point.lon",this.point.lng.toString())):(t.set("point.lat",this.point.lat.toString()),t.set("point.lon",this.point.lng.toString()))),this.text&&this.endpointUsesText&&t.set("text",this.text),this.ids&&this.endpointUsesIds&&t.set("ids",this.ids),void 0!==this.debug&&t.set("debug",this.debug?"1":"0"),t}},{key:"onDebugChange",value:function(t){this.debug=t,this.onChange()}},{key:"onEndpointChange",value:function(t){this.endpoint=t,this.onChange()}},{key:"onPointChange",value:function(t){var e=t.split(",");this.point=new v["LatLng"](parseFloat(e[0].trim()),parseFloat(e[1].trim())),this.onChange()}},{key:"onChange",value:function(){var t=this.getParams();this.queryPath="".concat(this.endpoint,"?").concat(t.toString()),this.isBuiltForSpa?window.history.replaceState({},"",this.queryPath):window.location.hash=this.queryPath,this.$forceUpdate()}},{key:"onSubmit",value:function(){var t=this,e=this.hosts.map(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){var o,r,a,s,c,l,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=n.text,o.endsWith("/")&&(o=o.substring(0,o.length-1)),r=t.queryPath,r.includes("api_key")||(a=t.getKey(o),a&&(r+="&api_key=".concat(a))),s="".concat(o).concat(r),e.next=7,fetch(s,{method:"GET",headers:{Accept:"application/json","X-Requested-With":""}}).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return t.t0=t.sent,t.t1=e.status,t.abrupt("return",{data:t.t0,status:t.t1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return window.console.warn(t),{status:"",data:{error:t}}}));case 7:return c=e.sent,l=c.status,u=c.data,u&&u.geocoding||(p="failed to load json",u&&u.error&&(p=u.error),u={geocoding:{errors:["".concat(l," ").concat(p)]}}),e.abrupt("return",{url:s,status:l,host:o,body:u,bodyString:"".concat(JSON.stringify(u,null,2),"\n\n")});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all(e).then((function(e){t.responses=e})).catch((function(t){window.console.error(t)}))}},{key:"pointChanged",value:function(t){this.pointStr="".concat(t.lat,",").concat(t.lng)}},{key:"endpointUsesText",get:function(){return["/v1/search","/v1/autocomplete"].includes(this.endpoint)}},{key:"endpointUsesIds",get:function(){return["/v1/place"].includes(this.endpoint)}},{key:"isPointRequired",get:function(){return"/v1/reverse"===this.endpoint}},{key:"endpointUsesPoint",get:function(){return["/v1/search","/v1/autocomplete","/v1/search/structured","/v1/reverse"].includes(this.endpoint)}},{key:"endpointUsesFocus",get:function(){return["/v1/search","/v1/autocomplete","/v1/search/structured"].includes(this.endpoint)}},{key:"pointLabel",get:function(){return this.endpointUsesFocus?"Focus":"Point"}},{key:"pointLat",get:function(){var t;return null===(t=this.point)||void 0===t?void 0:t.lat}},{key:"pointLng",get:function(){var t;return null===(t=this.point)||void 0===t?void 0:t.lng}}]),e}(h["c"]);Object(d["a"])([Object(h["b"])()],lt.prototype,"isBuiltForApi",void 0),Object(d["a"])([Object(h["b"])()],lt.prototype,"isBuiltForSpa",void 0),lt=Object(d["a"])([Object(h["a"])({components:{PointModal:ct,VueTagsInput:b["VueTagsInput"],FontAwesomeIcon:f["a"],ViewColumn:et}})],lt);var ut=lt,pt=ut,dt=(n("1145"),Object(H["a"])(pt,r,a,!1,null,null,null)),ht=dt.exports;new o["default"]({render:function(t){return t(ht)}}).$mount("#app")},db43:function(t,e,n){},db98:function(t,e,n){}});
//# sourceMappingURL=app.07a0ff72.js.map